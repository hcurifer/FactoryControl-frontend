<div mat-dialog-title class="dialog-title">
  <div class="title-text">
    <h2>Gestión de gamas preventivas</h2>
    <p>Administra tus gamas y consulta el catálogo de tareas.</p>
  </div>

  <button
    mat-raised-button
    color="primary"
    (click)="abrirCrearGama()">
    <mat-icon>add</mat-icon>
    Nueva gama
  </button>
</div>

<div mat-dialog-content class="dialog-content-scroll">

  <!-- LISTADO DE GAMAS -->
  <div class="lista" *ngIf="!cargando; else loadingGamas">

    <div class="gama-card" *ngFor="let gama of gamas">

      <div class="info">
        <h3>{{ gama.nombre }}</h3>
        <p>{{ gama.descripcion || 'Sin descripción' }}</p>
      </div>

      <div class="acciones">
        <span
          class="estado"
          [class.activa]="gama.activa"
          [class.inactiva]="!gama.activa">
          {{ gama.activa ? 'Activa' : 'Inactiva' }}
        </span>

        <button
          mat-stroked-button
          color="primary"
          (click)="verTareas(gama)">
          Ver tareas
        </button>

        <button
          mat-icon-button
          (click)="toggleGama(gama)"
          [matTooltip]="gama.activa ? 'Desactivar gama' : 'Activar gama'">
          <mat-icon>
            {{ gama.activa ? 'visibility_off' : 'visibility' }}
          </mat-icon>
        </button>
      </div>

    </div>

    <p *ngIf="gamas.length === 0" class="placeholder">
      No hay gamas preventivas creadas.
    </p>

  </div>

  <!-- LOADING GAMAS -->
  <ng-template #loadingGamas>
    <p class="placeholder">Cargando gamas preventivas...</p>
  </ng-template>

</div>

<div mat-dialog-actions align="end">
  <button mat-button (click)="cerrar()">Cerrar</button>
</div>
