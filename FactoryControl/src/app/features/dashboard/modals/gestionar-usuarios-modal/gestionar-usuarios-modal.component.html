<div mat-dialog-title class="dialog-title">
  <div class="title-text">
    <h2>Gesti√≥n de usuarios</h2>
    <p>Filtra, revisa y da de baja usuarios.</p>
  </div>

  <button
    mat-raised-button
    color="primary"
    (click)="abrirCrearUsuario()">
    <mat-icon>add</mat-icon>
    Crear usuario
  </button>
</div>

<div mat-dialog-content class="dialog-content-scroll">
  <div class="sheet">
    <!-- FILTROS -->
    <mat-chip-listbox class="filtros">
      <mat-chip-option
        [selected]="filtro === 'todos'"
        (click)="cambiarFiltro('todos')">
        Todos
      </mat-chip-option>

      <mat-chip-option
        [selected]="filtro === 'activos'"
        (click)="cambiarFiltro('activos')">
        Activos
      </mat-chip-option>

      <mat-chip-option
        [selected]="filtro === 'baja'"
        (click)="cambiarFiltro('baja')">
        Dados de baja
      </mat-chip-option>
    </mat-chip-listbox>

    <!-- ESTADOS -->
    <div class="loading" *ngIf="cargando">Cargando usuarios...</div>

    <div *ngIf="!cargando && usuarios.length === 0" class="empty">
      No hay usuarios.
    </div>

    <!-- LISTA -->
    <div class="lista" *ngIf="!cargando && usuarios.length > 0">
      <div class="usuario" *ngFor="let usuario of usuarios">
        <div class="info">
          <div class="nombre">
            {{ usuario.nombre }} {{ usuario.apellidos }}
          </div>
          <div class="correo">
            {{ usuario.correo }}
          </div>
        </div>

        <div class="acciones">
          <span class="estado inactiva" *ngIf="usuario.fecha_baja">Baja</span>

          <button
            mat-icon-button
            color="warn"
            *ngIf="!usuario.fecha_baja"
            (click)="darDeBaja(usuario)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div mat-dialog-actions align="end" class="dialog-actions">
  <button mat-button mat-dialog-close>Cerrar</button>
</div>

